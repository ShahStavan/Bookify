package beans;
import java.util.*;
import java.io.Console;
import java.sql.SQLException;

import com.mysql.jdbc.Connection;
import com.mysql.jdbc.PreparedStatement;
import com.mysql.jdbc.ResultSet;
import com.mysql.jdbc.Statement;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class sellerInfo {
	public static int login(String username, String password, Connection con) throws SQLException
	{
		Statement st = (Statement) con.createStatement();
		String query = "select uid from account where username = '"+username+"' and password = '"+password+"'";
		ResultSet rs = (ResultSet) st.executeQuery(query);
		int id=0;
		while(rs.next()) {
			id = rs.getInt(1);
		}
		if(id == 0){
			return 0;
		}
		return id;
	}
	public static int register(String username, String password, Connection con, String email) throws SQLException
	{
		
		//String regex = "^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%]).{8,20}$";
		//boolean isValidPassword = isValidPassword(password,regex);
		/*
		if(isValidPassword == false)
			return 0;
		else
		{
			Statement st = (Statement) con.createStatement();
			PreparedStatement pstmt = (PreparedStatement) con.prepareStatement("insert into seller values(?,?,?)");
			pstmt.setString(2, username);
			pstmt.setString(3, email);
			pstmt.setString(4, password);
			int i = pstmt.executeUpdate();
			return i;
		}
		*/
		Statement st = (Statement) con.createStatement();
		PreparedStatement pstmt = (PreparedStatement) con.prepareStatement("insert into account (username,email,password)values(?,?,?)");
		pstmt.setString(1, username);
		pstmt.setString(2, email);
		pstmt.setString(3, password);
		int i = pstmt.executeUpdate();
		return i;
	
	}
	 /**
     * Method to check if password is valid or not.
     * @param password
     * @return boolean
     */
	/*
    public static boolean isValidPassword(String password, String regex)
    {
            boolean isValid = true;
            if (password.length() > 15 || password.length() < 8)
            {
                    System.out.println("Password must be less than 20 and more than 8 characters in length.");
                    isValid = false;
            }
            String upperCaseChars = "(.*[A-Z].*)";
            if (!password.matches(upperCaseChars ))
            {
                    System.out.println("Password must have atleast one uppercase character");
                    isValid = false;
            }
            String lowerCaseChars = "(.*[a-z].*)";
            if (!password.matches(lowerCaseChars ))
            {
                    System.out.println("Password must have atleast one lowercase character");
                    isValid = false;
            }
            String numbers = "(.*[0-9].*)";
            if (!password.matches(numbers ))
            {
                    System.out.println("Password must have atleast one number");
                    isValid = false;
            }
            String specialChars = "(.*[@,#,$,%].*$)";
            if (!password.matches(specialChars ))
            {
                    System.out.println("Password must have atleast one special character among @#$%");
                    isValid = false;
            }
            return isValid;
    }
    */
}
